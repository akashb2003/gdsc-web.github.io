var touchStartY,touchMoveY,slider,module_class,pr,kv_video,slider2,slider3,slider4,slider5,load_device,param,wh=$(window).height(),ww=$(window).width(),bp=767,userAgent=window.navigator.userAgent.toLowerCase(),flg_index_slide=!1,flg_module_trans=!1,flg_module_end=!1,flg_module_start=!0,flg_load=!1,flg_top=!1,flg_top_module=!1,flg_team=!1,flg_work=!1,flg_pop=!1,flg_fv_move=!1,ua=navigator.userAgent.toLowerCase(),ver=navigator.appVersion.toLowerCase(),isMSIE=ua.indexOf("msie")>-1&&-1==ua.indexOf("opera"),isIE11=ua.indexOf("trident/7")>-1,isIEedge=ua.indexOf("edge")>-1,isIE=isMSIE||isIE11;isIEedge=isIEedge,userAgent=window.navigator.userAgent.toLowerCase();$(window).load((function(){$("#index").length?($("#load").addClass("on"),text_animation(),each_page(),setTimeout((function(){$("#load").addClass("on2")}),300),setTimeout((function(){$(".js-load").addClass("on_pic")}),400),setTimeout((function(){$("#load").addClass("on3"),each_page_index_load_kv_movie_set()}),600),setTimeout((function(){$("#load").addClass("on4")}),4300),setTimeout((function(){$("#load .block").fadeOut(500),each_page_index_load_m_slide(),each_page_index_load_cells()}),4900),isIE||isIEedge?(setTimeout((function(){each_page_index_load_kv_slide()}),5600),setTimeout((function(){each_page_index_load_hash(),$("#load").fadeOut(1500,(function(){$(".child_page .js-load").addClass("on"),setTimeout((function(){$(".js-load").addClass("on"),flg_load=!0,$(".js-img_change").length&&$(".js-img_change").each((function(){$(this).attr("src",$(this).attr("data-src"))}))}),100)}))}),5800)):(setTimeout((function(){expandCell()}),5300),setTimeout((function(){each_page_index_load_kv_slide()}),6600),setTimeout((function(){each_page_index_load_hash(),$("#load").fadeOut(800,(function(){$(".child_page .js-load").addClass("on"),setTimeout((function(){$(".js-load").addClass("on"),flg_load=!0,$(".js-img_change").length&&$(".js-img_change").each((function(){$(this).attr("src",$(this).attr("data-src"))}))}),100)}))}),6800))):(text_animation(),each_page(),setTimeout((function(){$("#load").fadeOut(1e3,(function(){$(".child_page .js-load").addClass("on"),setTimeout((function(){$(".js-load").addClass("on"),flg_load=!0,$(".js-img_change").length&&$(".js-img_change").each((function(){$(this).attr("src",$(this).attr("data-src"))}))}),500)}))}),500))})),$((function(){param=getParam("p"),isIE?$("body").addClass("ie"):isIEedge?$("body").addClass("ie edge"):-1!==ua.indexOf("safari")&&-1===ua.indexOf("chrome")&&$("body").addClass("safari"),load_device=ww>bp?"pc":"sp",setTimeout((function(){$("body").addClass("loaded")}),10),index_size_set(),$("#btn_menu").click((function(){$("body").toggleClass("popup"),$("#header").toggleClass("on")})),$("#block_menu a, #menu_close").click((function(){$("body").removeClass("popup"),$("#header").removeClass("on")})),$("#btn_menu").mousemove((function(e){if(ww>bp){var t=muuXY(e,this);t[0]<0||t[1]<0||t[0]>65||t[1]>65?$("#btn_menu .circle").css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}):$("#btn_menu .circle").css({"-webkit-transform":"translate3d("+(t[0]-32)+"px, "+(t[1]-32)+"px,0)",transform:"translate3d("+(t[0]-32)+"px, "+(t[1]-32)+"px,0)"})}})).mouseleave((function(e){$("#btn_menu .circle").css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"})})),$(document).on("click",".js-anc",(function(){var e=$(this).attr("tar"),t=$(this).attr("dir"),s=$("#"+e).offset().top;ww>bp?"true"==t?$("html,body").animate({scrollTop:s},600):$("html,body").animate({scrollTop:s-100},600):"true"==t?$("html,body").animate({scrollTop:s},600):$("html,body").animate({scrollTop:s-150},600)})),$(document).on("click",".js-btn_play",(function(){var e=$(this).attr("tar");$playerWindow=$("#"+e)[0].contentWindow,$(this).fadeOut(500),videoControl("playVideo")})),$(document).on("click",".js-popup_movie",(function(){var e=$(this).attr("yt");$(".js-popup_iframe iframe").attr("src","https://www.youtube.com/embed/"+e),$("#popup").fadeIn(500),setTimeout((function(){$(".popup_inner.media").addClass("on")}),300)})),$(document).on("click",".js-popup_img",(function(){var e=$(this).children("img").attr("src");$(".js-popup_img_h").css("background-image","url('"+e+"')"),$("#popup").fadeIn(500),setTimeout((function(){$(".popup_inner.media").addClass("on")}),300)})),$(document).on("click",".js-popup_circle",(function(){$("#popup").fadeIn(500),setTimeout((function(){$(".popup_inner.circle").addClass("on")}),100)})),$(document).on("click",".js-popup_close",(function(){$(".popup_inner.circle").removeClass("on"),$("#popup").fadeOut(500,(function(){$(".popup_inner").removeClass("on"),$(".js-popup_iframe iframe").attr("src",""),$(".js-popup_img_h").css("background-image","")}))})),$(window).keydown((function(e){27==e.keyCode&&($(".popup_inner.circle").removeClass("on"),$("#popup").fadeOut(500,(function(){$(".popup_inner").removeClass("on"),$(".js-popup_iframe iframe").attr("src",""),$(".js-popup_img_h").css("background-image","")})))})),$(document).on("click","#progress",(function(){$("html,body").animate({scrollTop:0},500)})),$(document).on("click","a.pjax",(function(e){e.preventDefault();var t=$(this).attr("href");$("#trans").show().removeClass("on off"),$("#wrapper").removeClass("m1 m2 m3 m4"),setTimeout((function(){$("#trans").addClass("on"),param="",slider=""}),10),setTimeout((function(){1==flg_top&&(cells[0].stop(),cells[1].stop(),cells[2].stop(),cells[3].stop(),flg_top=!1,slider2.destroySlider(),slider3.destroySlider(),slider4.destroySlider(),ww>bp&&slider5.redrawSlider()),1==flg_team&&(cells[0].stop(),flg_team=!1),1==flg_work&&(cells[0].stop(),flg_work=!1)}),500),setTimeout((function(){$.pjax({url:t,container:"#ajax_area",fragment:"#ajax_area"})}),1e3)})),$.pjax.defaults.timeout=1e4,$(document).on("pjax:end",(function(){gtag("config","UA-115313245-1",{page_path:location.pathname}),flg_top_module=!1,setTimeout((function(){$(".js-img_change").length&&$(".js-img_change").each((function(){$(this).attr("src",$(this).attr("data-src"))})),$("#index").length?ww>bp?setTimeout((function(){$("#trans").addClass("off"),setTimeout((function(){$("#trans").hide()}),800)}),100):setTimeout((function(){$("#trans").addClass("off"),setTimeout((function(){$("#trans").hide()}),800)}),500):($("#trans").addClass("off"),setTimeout((function(){$("#trans").hide()}),800)),text_animation(),each_page()}),100)}))})),window.onpopstate=function(e){flg_pop=!0,param=getParam("p"),"/"==location.pathname&&($("#index").length?"m1"==param||"m2"==param||"m3"==param||"m4"==param?(each_page_index_load_hash(),$("#module").show()):location.reload():"m1"==param||"m2"==param||"m3"==param||"m4"==param?$.pjax({url:"/?p="+param,container:"#ajax_area",fragment:"#ajax_area"}):location.reload())},$(window).scroll((function(e){var t=$(window).scrollTop(),s=t/($("#wrapper.child").height()-wh)*100;if($(".child_page .progress").width(s+"%"),$(".js-sc").each((function(){var e=$(this).offset().top;t>e-wh/1.2&&$(this).addClass("on")})),$("#index").length)module_scroll();else if($("#work").length){t>$(".js-sc_once").offset().top-200?$(".js-sc_once").addClass("on_once"):$(".js-sc_once").removeClass("on_once");var o=(t-$(".work_list").offset().top)/($(".work_list").height()-wh+100)*100;$(".sort .c1").css("stroke-dasharray",Math.floor(1.52*o)+" 152")}else if($("#team").length)t>$(".js-sc_once").offset().top-200?$(".js-sc_once").addClass("on_once"):$(".js-sc_once").removeClass("on_once"),$(".js-change_sub_menu").each((function(){var e=$(this).offset().top;if(t>e-wh/2){var s=$(this).attr("tar");$(".sub_menu li span").removeClass("active"),$(".sub_menu li."+s+" span").addClass("active")}}));else if($("#work_single").length)t>wh-100?$("#header").removeClass("c_change2").addClass("c_change"):$("#header").addClass("c_change2").removeClass("c_change");else if($("#store").length){var a=$(".ec_block").offset().top;t>a+$(".ec_block").height()-72-$(".js-store_fix").height()?$(".js-store_fix").addClass("fixed_end"):t>a-72?$(".js-store_fix").removeClass("fixed_end").addClass("fixed"):$(".js-store_fix").removeClass("fixed")}}));var timer=!1;function each_page(){if($("#index").length)$("body").addClass("fixed"),$("#wrapper").removeClass("child"),$("#header").removeClass("on c_change c_change2"),$(".js-tilt").tilt(),1==flg_load&&(each_page_index_load_hash(),each_page_index_load_kv_slide(),each_page_index_load_m_slide(),each_page_index_load_kv_movie_set(),each_page_index_load_cells()),$(".js-fv_module").click((function(){$("#trans").show().removeClass("on off"),setTimeout((function(){$("#trans").addClass("on")}),10);var e=$(this).attr("tar");setTimeout((function(){param=e,tar_push(e),each_page_index_load_hash(),$("#trans").addClass("off"),setTimeout((function(){$("#trans").hide()}),800)}),1e3)})),$(".js-special_menu .bl").click((function(){$("body").removeClass("fixed");var e=$(this).attr("tar");$("#special_menu").hasClass("open")?module_class!==e?special_menu_open(e):$("html,body").animate({scrollTop:0},500):(kv_video.pause(),flg_top=!0,tar_push(e),$("#header").addClass("c_change"),$("#fv").addClass("end"),slider.goToSlide(0),slider.stopAuto(),$("#wrapper").removeClass("m1 m2 m3 m4"),$("#wrapper").addClass(e),$("#module .m_block .fv, #module .js-sc").removeClass("on"),$(".js-special_menu .progress").attr("style",""),module_class=e,$("#module, #module .m_block."+e).show(),$("#special_menu").addClass("open"),setTimeout((function(){$("#module .m_block."+e+" .fv").addClass("on")}),300))})),$("#fv .scroll").click((function(){$("#special_menu").addClass("on")})),$("#fv, #special_menu, #module .end_block, #module .fv").bind("touchstart",(function(){touchStartY=event.changedTouches[0].pageY})),$("#fv, #special_menu, #module .end_block, #module .fv").bind("touchmove",(function(){touchMoveY=event.changedTouches[0].pageY})),$("#fv, #special_menu").bind("touchend",(function(){$("#special_menu").hasClass("open")||0!=flg_fv_move||(flg_fv_move=!0,touchStartY>touchMoveY?touchStartY>touchMoveY+50&&($("#special_menu").addClass("on"),$("#header").addClass("c_change")):touchStartY<touchMoveY&&touchStartY+50<touchMoveY&&($("#special_menu").removeClass("on"),$("#header").removeClass("c_change")),setTimeout((function(){flg_fv_move=!1}),1500))})),$("#module .end_block").bind("touchend",(function(){if(touchStartY>touchMoveY+50&&1==flg_module_end)switch(flg_module_end=!1,module_class){case"m1":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m2"));break;case"m2":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m3"));break;case"m3":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m4"))}})),$("#module .fv").bind("touchend",(function(){if(touchStartY+50<touchMoveY&&1==flg_module_start)switch(flg_module_start=!1,module_class){case"m2":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m1"));break;case"m3":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m2"));break;case"m4":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m3"))}})),$("#fv, #special_menu").mousewheel((function(e,t){if(e.originalEvent.wheelDeltaY)if(-1!=userAgent.indexOf("chrome"))s=e.originalEvent.wheelDeltaY;else if(-1!=userAgent.indexOf("safari"))s=25*e.originalEvent.wheelDeltaY;else s=e.originalEvent.wheelDeltaY;else var s=-e.originalEvent.deltaY;$("#special_menu").hasClass("open")||0!=flg_fv_move||(s>10?(flg_fv_move=!0,$("#special_menu").removeClass("on on_done"),$("#header").removeClass("c_change"),setTimeout((function(){flg_fv_move=!1}),1500)):s<-10&&(flg_fv_move=!0,$("#special_menu").hasClass("on_done")?(kv_video.pause(),flg_top=!0,cells[0].start(),history.pushState("","","/?p=m1"),$("#header").addClass("c_change"),$("#fv").addClass("end"),slider.goToSlide(0),slider.stopAuto(),$("#wrapper").removeClass("m1 m2 m3 m4"),$("#wrapper").addClass("m1"),$("#module .m_block .fv, #module .js-sc").removeClass("on"),$(".js-special_menu .progress").attr("style",""),module_class="m1",$("#module, #module .m_block.m1").show(),$("#special_menu").addClass("open"),setTimeout((function(){$("#module .m_block.m1 .fv").addClass("on")}),300),setTimeout((function(){$("body").removeClass("fixed"),flg_fv_move=!1}),1500)):($("#special_menu").addClass("on"),$("#header").addClass("c_change"),setTimeout((function(){$("#special_menu").addClass("on_done"),flg_fv_move=!1}),1500))))})),$("#module .fv").mousewheel((function(e,t){if(e.originalEvent.wheelDeltaY)if(-1!=userAgent.indexOf("chrome"))s=e.originalEvent.wheelDeltaY;else if(-1!=userAgent.indexOf("safari"))s=25*e.originalEvent.wheelDeltaY;else s=e.originalEvent.wheelDeltaY;else var s=-e.originalEvent.deltaY;if(s>50&&1==flg_module_start)switch(flg_module_start=!1,module_class){case"m2":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m1"));break;case"m3":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m2"));break;case"m4":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open_up("m3"))}})),$("#module .end_block").mousewheel((function(e,t){if(e.originalEvent.wheelDeltaY)if(-1!=userAgent.indexOf("chrome"))s=e.originalEvent.wheelDeltaY;else if(-1!=userAgent.indexOf("safari"))s=25*e.originalEvent.wheelDeltaY;else s=e.originalEvent.wheelDeltaY;else var s=-e.originalEvent.deltaY;if(s<-50&&1==flg_module_end)switch(flg_module_end=!1,module_class){case"m1":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m2"));break;case"m2":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m3"));break;case"m3":0==flg_module_trans&&(flg_module_trans=!0,special_menu_open("m4"))}}));else if($("#work").length)flg_work=!0,$(".js-tilt").tilt(),cells=[new CellAnim("canvas01",1400,600,1,16,"0.0666, 0.1372, 0.4431, 1.0",270,993)],window.addEventListener("mousemove",(function(e){for(var t=0;t<cells.length;t++)cells[t].requestId&&cells[t].mouseUpdate(e.clientX,e.clientY)})),cells[0].start(),$(".work_list li").each((function(e){e%2==0?$(this).addClass("left"):$(this).addClass("right")})),$(".js-cate li").click((function(){$(".js-cate li").removeClass("active"),$(this).addClass("active");var e=$(this).attr("tar");$(window).scrollTop()==Math.floor($(".js-sc_once").offset().top-190)||$(window).scrollTop()==Math.ceil($(".js-sc_once").offset().top-190)?category(e):($("html,body").animate({scrollTop:$(".js-sc_once").offset().top-190},500),setTimeout((function(){category(e)}),600))})),$(".js-select").click((function(){$(".js-select").hasClass("on")?$(".js-select, .js-cate_sp").removeClass("on"):$(".js-select, .js-cate_sp").addClass("on")})),$(".js-cate_sp li").click((function(){_this=$(this),$(".js-cate_sp, .js-select").removeClass("on");var e=_this.attr("tar"),t=_this.children("span").text();$(".js-select span").text(t),setTimeout((function(){$(".js-cate_sp li").removeClass("none l1 l2 l3 l4"),_this.addClass("none"),$(".js-cate_sp li:not(.none)").each((function(e){$(this).addClass("l"+(e+1))}))}),10),category(e)}));else if($("#team").length)flg_team=!0,$(".js-tilt").tilt(),cells=[new CellAnim("canvas01",1400,600,1,16,"0.8784, 0.7882, 0.6235, 1.0",270,993)],window.addEventListener("mousemove",(function(e){for(var t=0;t<cells.length;t++)cells[t].requestId&&cells[t].mouseUpdate(e.clientX,e.clientY)})),cells[0].start(),$(".btn .js-anc").click((function(){var e=$(this).attr("sel");$(".form .radio ."+e).prop("checked",!0),$(".form .change_block").removeClass("active"),$(".form #"+e).addClass("active")})),$(".form input:radio").change((function(){var e=$(this).val();$(".form .change_block").removeClass("active"),$(".form #"+e).addClass("active")})),$(".js-kris").click((function(){$(".kris").toggleClass("open"),$(".kris .hide").slideToggle(400,(function(){$(".kris .hide").toggleClass("open")}))})),$("input,textarea").keydown((function(e){$(e.currentTarget).removeClass("error"),$(e.currentTarget).parents(".change_block").find(".error").length||$(e.currentTarget).parents(".change_block").removeClass("error")}));else if($("#donate").length)$(".js-tilt").tilt(),$(".js-price li").click((function(){if($("form .btn.disable").removeClass("disable"),$(".js-price li").removeClass("on"),$(this).addClass("on"),$(this).hasClass("js-custom")){$(".js-custom p").removeClass("tra05").fadeOut(200),$(".js-custom input").focus();var e=$(".js-custom input").val();$("[name='check']").prop("checked")?$("#donate form input[name='amount'], #donate form input[name='a3']").val(roundFloat(1.04*e,2)):$("#donate form input[name='amount'], #donate form input[name='a3']").val(e)}else{e=$(this).text().split("$")[1];$("[name='check']").prop("checked")?$("#donate form input[name='amount'], #donate form input[name='a3']").val(roundFloat(1.04*e,2)):$("#donate form input[name='amount'], #donate form input[name='a3']").val(e),"none"==$(".js-custom p").css("display")&&$(".js-custom p").fadeIn(200,(function(){$(".js-custom p").addClass("tra05")}))}})),$(document).on("keydown",".js-custom input",(function(e){var t=e.keyCode;if(!(String.fromCharCode(t).match(/[0-9]/)||37<=t&&t<=40||8===t||46===t))return!1})),$(document).on("keyup",".js-custom input",(function(e){var t=$(this).val();$("[name='check']").prop("checked")?$("#donate form input[name='amount'], #donate form input[name='a3']").val(roundFloat(1.04*t,2)):$("#donate form input[name='amount'], #donate form input[name='a3']").val(t)})),$("input[name='radios']").change((function(){var e=$("input[name='radios']:checked").val();"once"==$("input[name='radios']:checked").attr("class")?($("form.once").show(),$("form.other").hide()):($("form.once").hide(),$("form.other").show()),"Monthly contribution"==e?($("#donate form.other input[name='item_number']").val("Monthly contribution"),$("#donate form.other input[name='p3']").val("1")):"Quarterly contribution"==e&&($("#donate form.other input[name='item_number']").val("Quarterly contribution"),$("#donate form.other input[name='p3']").val("3"))})),$("input[name='check']").change((function(){$("[name='check']").prop("checked")?($("#donate form input[name='amount']").val(roundFloat(1.04*$("#donate form input[name='amount']").val(),2)),$("#donate form input[name='a3']").val(1.04*$("#donate form input[name='a3']").val())):($("#donate form input[name='amount']").val(roundFloat($("#donate form input[name='amount']").val()/1.04,2)),$("#donate form input[name='a3']").val($("#donate form input[name='a3']").val()/1.04))}));else if($("#faq").length)$(".js-faq_toggle").click((function(){$(this).toggleClass("active"),$(this).next().slideToggle(300)}));else if($("#store").length){$(".js-faq_toggle").click((function(){$(this).toggleClass("active"),$(this).next().slideToggle(300)}));var e=$(".js-choose .active").attr("item");$(".btn_block form input[name='item_name']").val(e),$(".js-check_sc").click((function(){$(".faq").hasClass("on")?ww>bp?$("html,body").animate({scrollTop:$(".js-check_sc_h").offset().top-100},500):$("html,body").animate({scrollTop:$(".js-check_sc_h").offset().top-150},500):ww>bp?$("html,body").animate({scrollTop:$(".js-check_sc_h").offset().top-220},500):$("html,body").animate({scrollTop:$(".js-check_sc_h").offset().top-270},500),setTimeout((function(){$(".js-check_sc_h .js-faq_toggle").addClass("active"),$(".js-check_sc_h .js-faq_toggle").next().slideDown(300)}),500)})),$(".js-check").click((function(){$(".check").removeClass("alert"),1==$("#check").prop("checked")?$(".js-check_h .btn").removeClass("disable"):$(".js-check_h .btn").addClass("disable")})),$(".js-check_h .btn").click((function(){$(this).hasClass("disable")&&($(".check").addClass("alert"),ww>bp?$("html,body").animate({scrollTop:$(".check").offset().top-100},500):$("html,body").animate({scrollTop:$(".check").offset().top-150},500))})),$(".js-choose li").click((function(){$(".js-choose li").removeClass("active"),$(this).addClass("active"),$(".js-store_fix").addClass("off");var e=$(this).attr("num"),t=$(this).attr("item");$(".btn_block form input[name='item_name']").val(t),setTimeout((function(){for(var t=1;t<=5;t++){var s=(s=$(".js-slide_store_2 li.p"+t+" img").attr("src")).split("artwork");$(".js-slide_store_2 li.p"+t+" img, #bx-pager_thum a.p"+t+" img").attr("src",s[0]+"artwork"+e+"_"+t+".jpg")}slide_store_2.goToSlide(0)}),500),setTimeout((function(){$(".js-store_fix").removeClass("off")}),1300)})),slide_store_1=$(".js-slide_store_1").bxSlider({mode:"fade",auto:!0,speed:2e3,pager:!0,controls:!0,pause:7e3,onSliderLoad:function(){setTimeout((function(){$(".js-slide_store_1 li:nth-child(1)").addClass("on_pic")}),1e3)},onSlideBefore:function(e,t){setTimeout((function(){e.addClass("on_pic")}),10)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide_store_1 li:nth-child("+(t+1)+")").removeClass("on_pic")}),10)}}),slide_store_2=ww>bp?$(".js-slide_store_2").bxSlider({mode:"horizontal",auto:!1,speed:800,pager:!0,controls:!1,infiniteLoop:!1,pagerCustom:"#bx-pager_thum",onSlideBefore:function(e,t){setTimeout((function(){e.addClass("on")}),10)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide_store_1 li:nth-child("+(t+1)+")").removeClass("on")}),10)}}):$(".js-slide_store_2").bxSlider({mode:"horizontal",auto:!1,speed:800,pager:!0,controls:!1,infiniteLoop:!1,onSlideBefore:function(e,t){setTimeout((function(){e.addClass("on")}),10)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide_store_1 li:nth-child("+(t+1)+")").removeClass("on")}),10)}})}else $("#press").length&&$(".js-more").click((function(){$(".b1").toggleClass("open"),$(".b1 .hide").slideToggle(400,(function(){$(".b1 .hide").toggleClass("open")}))}));$(".child_page").length&&($("body").removeClass("fixed"),$("#wrapper").addClass("child"),$("#work_single").length?$("#header").addClass("c_change2"):$("#header").addClass("c_change"),1==flg_load&&setTimeout((function(){$(".js-load").addClass("on")}),200)),flg_pop=!1}function each_page_index_load_kv_movie_set(){ww>bp?$(".js-movie_set").html('<video id="js-movie" src="/wp-content/themes/cas/movie/pic_kv_1.mp4" autoplay loop muted playsinline class="js-movie"></video>'):$(".js-movie_set").html('<video id="js-movie" src="/wp-content/themes/cas/movie/pic_kv_1_sp.mp4" autoplay loop muted playsinline class="js-movie"></video>'),ww>wh-172?$("#index #fv .slide ul li .movie").addClass("wide"):$("#index #fv .slide ul li .movie").removeClass("wide"),setTimeout((function(){kv_video=$("#js-movie").get(0),"m1"==param||"m2"==param||"m3"==param||"m4"==param?(kv_video.pause(),1==flg_load&&slider.stopAuto()):(isIEedge&&kv_video.play(),$("#module").hide())}),100)}function each_page_index_load_kv_slide(){setTimeout((function(){slider||(slider=$(".js-slide").bxSlider({mode:"fade",auto:!0,speed:2e3,pager:!0,controls:!0,pause:15e3,onSliderLoad:function(){ww>bp?$(".bx-pager-item a").html('<svg class="base" width="60" height="60" viewBox="0 0 60 60"><circle class="c1" cx="30" cy="30" r="29" stroke="#fff" stroke-width="1" fill="none"></circle></svg>'):$(".bx-pager-item a").html('<svg class="base" width="46" height="46" viewBox="0 0 46 46"><circle class="c1" cx="23" cy="23" r="21" stroke="#130f4b" stroke-width="1" fill="none"></circle></svg>'),setTimeout((function(){$(".bx-pager-item a").removeClass("active")}),10),setTimeout((function(){$(".bx-pager-item:nth-child(1) a").addClass("active")}),500),setTimeout((function(){$(".js-load").addClass("on_pic")}),200),setTimeout((function(){$(".js-load").addClass("on")}),1e3)},onSlideBefore:function(e,t){$(".slide").removeClass("first"),setTimeout((function(){$(".js-slide li:nth-child("+(t+1)+")").addClass("off")}),10),setTimeout((function(){e.addClass("on_pic")}),20),setTimeout((function(){e.addClass("on")}),1500)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide li:nth-child("+(t+1)+")").removeClass("on on_pic off")}),10)}}),"m1"!=param&&"m2"!=param&&"m3"!=param&&"m4"!=param||slider.stopAuto())}),10)}function each_page_index_load_m_slide(){ww>bp&&(slider2=$(".js-slide2").bxSlider({mode:"horizontal",auto:!1,speed:800,pager:!0,controls:!0,infiniteLoop:!1,hideControlOnEnd:!0,minSlides:3,maxSlides:4,moveSlides:2,slideWidth:298,onSlideBefore:function(e,t){setTimeout((function(){$(".js-slide2").addClass("on")}),50)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide2").removeClass("on")}),10)}})),slider3=$(".js-slide3").bxSlider({mode:"horizontal",auto:!1,speed:1e3,pager:!0,controls:!1,infiniteLoop:!1,onSlideBefore:function(e,t,s){var o=$(".forsp .step_pic.s1").outerWidth()-ww;$(".step_pic.s1").css("left",-o/3*s+"px")}}),slider4=$(".js-slide4").bxSlider({mode:"horizontal",auto:!1,speed:1e3,pager:!0,controls:!1,infiniteLoop:!1,onSlideBefore:function(e,t,s){var o=$(".forsp .step_pic.s2").outerWidth()-ww;$(".step_pic.s2").css("left",-o/3*s+"px")}}),ww>bp&&(slider5=$(".js-slide5").bxSlider({mode:"horizontal",auto:!1,speed:1e3,pager:!0,controls:!0,infiniteLoop:!1,hideControlOnEnd:!0,startSlide:1,onSliderLoad:function(){setTimeout((function(){$("#index").addClass("loaded"),$(".slide5").addClass("js-appear_block tra30a delay02"),$(".slide5 .bx-pager-item a[data-slide-index='0']").removeClass("active"),$(".slide5 .bx-pager-item a[data-slide-index='1']").addClass("active")}),500)},onSlideBefore:function(e,t){setTimeout((function(){$(".js-slide5").addClass("on")}),50)},onSlideAfter:function(e,t,s){setTimeout((function(){$(".js-slide5").removeClass("on")}),10)}}))}function each_page_index_load_cells(){cells=[new CellAnim("canvas01",1400,1e3,1,16,"0.0666, 0.1372, 0.4431, 1.0",270,993),new CellAnim("canvas02a",1400,1e3,1,16,"0.8784, 0.7882, 0.6235, 1.0",270,993),new CellAnim("canvas03",1400,1e3,1,16,"0.0666, 0.1372, 0.4431, 1.0",270,993),new CellAnim("canvas04",1400,1e3,1,16,"0.8784, 0.7882, 0.6235, 1.0",270,993)],"m1"!=param&&"m2"!=param&&"m3"!=param&&"m4"!=param||(tar=param,"m1"==tar?cells[0].start():"m2"==tar?cells[1].start():"m3"==tar?cells[2].start():"m4"==tar&&cells[3].start()),window.addEventListener("mousemove",(function(e){for(var t=0;t<cells.length;t++)cells[t].requestId&&cells[t].mouseUpdate(e.clientX,e.clientY)}))}function each_page_index_load_hash(){"m1"!=(param=getParam("p"))&&"m2"!=param&&"m3"!=param&&"m4"!=param||(1==flg_load&&$("#module .m_block").hide().removeClass("active"),tar=param,$("body").removeClass("fixed"),$("#special_menu").addClass("on"),flg_top=!0,$("#header").addClass("c_change"),$("#fv").addClass("end"),$("#wrapper").removeClass("m1 m2 m3 m4"),$("#wrapper").addClass(tar),$("#module .m_block .fv, #module .js-sc").removeClass("on"),$(".js-special_menu .progress").attr("style",""),module_class=tar,$("#module, #module .m_block."+tar).show(),$("#module .m_block."+tar).addClass("active"),$("#special_menu").addClass("open"),$("html,body").scrollTop(0),setTimeout((function(){$("#module .m_block."+tar+" .fv").addClass("on")}),300),1==flg_pop&&$("#module").show())}function text_animation(){$(".js-text_word").length&&$(".js-text_word").each((function(){if(!$(this).hasClass("done")){$(this).addClass("done");for(var e=$(this).html().split(" "),t="",s=0;s<e.length;s++)" "==e[s]?t+=" ":"<br>"==e[s]||"<br />"==e[s]?t+="<br />":t+='<p><span class="tra30a" style="-webkit-transition-delay: '+s/15+"s; transition-delay: "+s/15+'s;">'+e[s]+"</span></p>";$(this).html(t)}}))}function special_menu_open(e){cells[0].stop(),cells[1].stop(),cells[2].stop(),cells[3].stop(),setTimeout((function(){$("#module .m_block:not(."+e+")").addClass("off"),flg_module_trans=!0,$("html,body").animate({scrollTop:$("#module").height()},500),$("#module .m_block").removeClass("active")}),10),setTimeout((function(){$("#module .m_block .fv").removeClass("on"),$(".js-special_menu .progress").attr("style",""),$("#module .m_block").hide(),$("#module, #module .m_block."+e).show(),$("#wrapper").removeClass("m1 m2 m3 m4"),$("#wrapper").addClass(e),module_class=e,$("html,body").scrollTop(0),$("#module .js-sc").removeClass("on"),$("#module, #module .m_block."+e).addClass("active"),$("#module, #module .m_block:not(."+e+")").removeClass("active"),tar_push(e),setTimeout((function(){$("#module .m_block").removeClass("off off_up"),$("#module .m_block."+e+" .fv").addClass("on"),flg_module_trans=!1}),500)}),1200)}function special_menu_open_up(e){cells[0].stop(),cells[1].stop(),cells[2].stop(),cells[3].stop(),setTimeout((function(){$("#module .m_block:not(."+e+")").addClass("off_up"),flg_module_trans=!0,$("html,body").scrollTop(0),$("#module .m_block").removeClass("active")}),10),setTimeout((function(){$("#module .m_block").addClass("active_up")}),100),setTimeout((function(){$("#module .m_block .fv").addClass("on"),$(".js-special_menu .progress").attr("style",""),$(".js-special_menu ."+e+" .progress").attr("style","width: 100%"),$("#module .m_block").hide(),$("#module, #module .m_block."+e).show(),$("#wrapper").removeClass("m1 m2 m3 m4"),$("#wrapper").addClass(e),module_class=e,$("html,body").scrollTop($("#module").height()),$("#module, #module .m_block."+e).addClass("active"),$("#module, #module .m_block:not(."+e+")").removeClass("active active_up"),tar_push(e),setTimeout((function(){$("#module .m_block").removeClass("off off_up"),flg_module_trans=!1}),500)}),1200)}function module_scroll(){var e=$(window).scrollTop();switch(wh=window.innerHeight,(pr=e/($("#module").height()-wh)*100)>99&&0==flg_module_end&&(flg_module_end=!0),pr>0?flg_module_start=!1:0==pr&&(flg_module_start=!0),module_class){case"m1":$(".js-special_menu .m1 .progress").width(pr+"%");break;case"m2":ww>bp?$(".js-special_menu .m2 .progress").height(pr+"%"):$(".js-special_menu .m2 .progress").width(pr+"%");break;case"m3":$(".js-special_menu .m3 .progress").width(pr+"%");break;case"m4":ww>bp?$(".js-special_menu .m4 .progress").height(pr+"%"):$(".js-special_menu .m4 .progress").width(pr+"%")}}function muuXY(e,t){var s,o;return e||(e=window.event),e.targetTouches?(s=e.targetTouches[0].pageX-e.target.offsetLeft,o=e.targetTouches[0].pageY-e.target.offsetTop):t&&(s=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop),[s,o]}function videoControl(e){$playerWindow.postMessage('{"event":"command","func":"'+e+'","args":""}',"*")}function category(e){$(".work_list li").removeClass("delay02 on"),setTimeout((function(){$(".work_list li").hide().css("block","").removeClass("left right"),setTimeout((function(){$(".work_list li."+e).css("display","block"),$(".work_list li."+e).each((function(e){e%2==0?$(this).addClass("left"):$(this).addClass("right")}))}),10),setTimeout((function(){$(".work_list li."+e).each((function(e){_this=$(this),0==e&&_this.addClass("on"),1==e&&_this.addClass("delay02").addClass("on")}))}),100)}),1200)}function getParam(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function index_size_set(){$("#index").length&&(ww>wh-172?$("#index #fv .slide ul li .movie").addClass("wide"):$("#index #fv .slide ul li .movie").removeClass("wide"),ww>bp?ww>1440?ww/wh>1.8?$("#load").addClass("wide"):$("#load").addClass("tall"):wh>800&&$("#load").addClass("tall"):ww>375?ww/wh>.561?$("#load").addClass("wide"):$("#load").addClass("tall"):wh>668&&$("#load").addClass("tall"))}function tar_push(e){flg_top_module=!0,"m1"==e?(history.pushState("","","/?p=m1"),cells[0].start()):"m2"==e?(history.pushState("","","/?p=m2"),cells[1].start()):"m3"==e?(history.pushState("","","/?p=m3"),cells[2].start()):"m4"==e&&(history.pushState("","","/?p=m4"),cells[3].start())}function roundFloat(e,t){var s=Math.pow(10,t);return Math.round(e*s)/s}function CellAnim(e,t,s,o,a,i,n,l){this.id=e,this.ballCount=a,this.time,this.mouse={x:0,y:0},this.cs={w:t,h:s},this.scale=o,this.setuped=!1,this.color=i,this.movement=n,this.movement2=l}function beginCell(){document.querySelector("#cell_loading").beginElement()}function endCell(){document.querySelector("#cell_loading").endElement()}function expandCell(){$(".preload_path").each((function(e,t){$(t).attr("d","M1441,801V1H1V801ZM1,407V1H1441V801H1Z")})),loading_cells=document.getElementsByClassName("cell_loading");for(var e=0;e<loading_cells.length;e++)loading_cells[e].endElement();loaded_cells=document.getElementsByClassName("cell_loaded");for(e=0;e<loaded_cells.length;e++)loaded_cells[e].beginElement()}$(window).resize((function(){!1!==timer&&clearTimeout(timer),timer=setTimeout((function(){ww=$(window).width(),wh=$(window).height(),ww>bp?"sp"==load_device&&location.reload():"pc"==load_device&&location.reload(),index_size_set()}),200)})),CellAnim.prototype.animate=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.time++,j=0;for(var e=0;e<this.ballCount;e++)e<5?(this.pats[j]=Math.cos(75e-5*this.time+this.randoms[e])*this.cs.w/3+this.cs.w/2+this.mousedts[e][0],j++,this.pats[j]=Math.sin(75e-5*this.time+this.randoms[e])*this.cs.h/3+this.cs.h/2+this.mousedts[e][1],j++):e<9?(this.pats[j]=Math.sin(75e-5*this.time+this.randoms[e])*this.cs.w/8+this.cs.w/2+this.mousedts[e][0],j++,this.pats[j]=Math.cos(75e-5*this.time+this.randoms[e])*this.cs.h/8+this.cs.h/2+this.mousedts[e][1],j++):e<13?(this.pats[j]=Math.sin(.0012*this.time+this.randoms[e])*this.cs.w/5+this.cs.w/2+this.mousedts[e][0],j++,this.pats[j]=this.cs.h/2+this.mousedts[e][1],j++):(this.pats[j]=Math.sin(.001*this.time+this.randoms[e])*this.cs.w/4+this.cs.w/2+this.mousedts[e][0],j++,this.pats[j]=Math.cos(.001*this.time+this.randoms[e])*this.cs.h/4+this.cs.h/2+this.mousedts[e][1],j++);this.gl.uniform2fv(this.uniLocation[2],this.pats),this.m.identity(this.mMatrix),this.m.multiply(this.tmpMatrix,this.mMatrix,this.mvpMatrix),this.gl.uniformMatrix4fv(this.uniLocation[0],!1,this.mvpMatrix),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.gl.flush(),this.requestId=requestAnimationFrame(this.animate.bind(this))},CellAnim.prototype.setup=function(e){function t(e,t,s){if("vs"==s)var o=e.createShader(e.VERTEX_SHADER);else o=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))return o;alert(e.getShaderInfoLog(o))}var s=["attribute vec3 position;","attribute vec4 color;","uniform   mat4 mvpMatrix;","void main(void){","gl_Position = mvpMatrix * vec4(position, 1.0);","}"].join("\n"),o=["precision highp float;","uniform float sizes[",this.ballCount,"];","uniform vec2 pats[",this.ballCount,"];","float dist;","float temp1, temp2, temp3;","void main(void){","const int count = ",this.ballCount,";","for (int i = 0; i < count; i++){","temp1 = gl_FragCoord.x - pats[i][0];","temp2 = gl_FragCoord.y - pats[i][1];","dist = sizes[i] / (pow(temp1 ,2.) + pow(temp2, 2.));","temp3 += dist;","}","temp3 = 1. - smoothstep(0.97, 0.99, temp3);","gl_FragColor = vec4(",this.color,"-temp3);","}"].join("\n");this.c=document.getElementById(this.id),this.c.width=this.cs.w,this.c.height=this.cs.h,this.gl=this.c.getContext("webgl")||this.c.getContext("experimental-webgl");var a=t(this.gl,s,"vs"),i=t(this.gl,o,"fs"),n=function(e,t,s){var o=e.createProgram();if(e.attachShader(o,t),e.attachShader(o,s),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS))return e.useProgram(o),o;alert(e.getProgramInfoLog(o))}(this.gl,a,i);attLocation=this.gl.getAttribLocation(n,"position"),attStride=3;var l,d,r,c=(l=this.gl,d=[-1,1,0,1,1,0,-1,-1,0,1,-1,0],r=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,new Float32Array(d),l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,null),r),m=function(e,t){var s=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),s}(this.gl,[0,1,2,3,2,1]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.enableVertexAttribArray(attLocation),this.gl.vertexAttribPointer(attLocation,attStride,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,m),this.uniLocation=new Array,this.uniLocation[0]=this.gl.getUniformLocation(n,"mvpMatrix"),this.uniLocation[1]=this.gl.getUniformLocation(n,"sizes"),this.uniLocation[2]=this.gl.getUniformLocation(n,"pats"),this.m=new matIV,this.mMatrix=this.m.identity(this.m.create()),this.vMatrix=this.m.identity(this.m.create()),this.pMatrix=this.m.identity(this.m.create()),this.tmpMatrix=this.m.identity(this.m.create()),this.mvpMatrix=this.m.identity(this.m.create()),this.m.lookAt([0,0,1],[0,0,0],[0,1,0],this.vMatrix),this.m.perspective(45,this.c.width/this.c.height,.1,100,this.pMatrix),this.m.multiply(this.pMatrix,this.vMatrix,this.tmpMatrix),this.randoms=new Array;for(var u=new Array,h=0;h<this.ballCount;h++)random=Math.floor(100*Math.random()),this.randoms.push(random),u.push((2e3+45*random)*this.cs.h*this.cs.w/25e5);this.gl.uniform1fv(this.uniLocation[1],u),this.mousedts=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],this.pats=new Array(2*this.ballCount),this.time=0,this.setuped=!0,e()},CellAnim.prototype.start=function(){this.setuped||this.setup(this.animate.bind(this)),this.requestId||(this.requestId=window.requestAnimationFrame(this.animate.bind(this)))},CellAnim.prototype.stop=function(){this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=void 0)},CellAnim.prototype.mouseUpdate=function(e,t){var s=document.getElementById(this.id).getBoundingClientRect();this.mouse.x=(e-s.left)/this.scale,this.mouse.y=this.cs.h-(t-s.top)/this.scale,j=0;for(var o=0;o<this.ballCount;o++){distanceX=this.pats[j]-this.mouse.x,j++,distanceY=this.pats[j]-this.mouse.y,j++;var a=Math.atan2(distanceX,distanceY),i=Math.sqrt(Math.pow(distanceX,2)+Math.pow(distanceY,2));this.mousedts[o][0]=(Math.cos(a)*this.movement*Math.pow(this.movement2/1e3,i)+14*this.mousedts[o][0])/15,this.mousedts[o][1]=(Math.sin(a)*this.movement*Math.pow(this.movement2/1e3,i)+14*this.mousedts[o][1])/15}};